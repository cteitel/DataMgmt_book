<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>18 Iterating and Conditioning: for Loops and if Statements | Data Management and Reproducible Science</title>
<meta name="author" content="Claire S Teitelbaum">
<meta name="description" content="18.1 Objectives Apply loops to automate repeating tasks Use conditional statements within loops Understand when to use for, while, and if statements  18.2 Additional reading Hadley Wickham, Mine...">
<meta name="generator" content="bookdown 0.43 with bs4_book()">
<meta property="og:title" content="18 Iterating and Conditioning: for Loops and if Statements | Data Management and Reproducible Science">
<meta property="og:type" content="book">
<meta property="og:description" content="18.1 Objectives Apply loops to automate repeating tasks Use conditional statements within loops Understand when to use for, while, and if statements  18.2 Additional reading Hadley Wickham, Mine...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="18 Iterating and Conditioning: for Loops and if Statements | Data Management and Reproducible Science">
<meta name="twitter:description" content="18.1 Objectives Apply loops to automate repeating tasks Use conditional statements within loops Understand when to use for, while, and if statements  18.2 Additional reading Hadley Wickham, Mine...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.8.0/transition.js"></script><script src="libs/bs3compat-0.8.0/tabs.js"></script><script src="libs/bs3compat-0.8.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="libs/tabwid-1.1.3/tabwid.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Data Management and Reproducible Science</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Course overview</a></li>
<li><a class="" href="intro.html"><span class="header-section-number">2</span> Introduction: The What and Why of Reproducible Science</a></li>
<li><a class="" href="basics.html"><span class="header-section-number">3</span> Getting Started with R</a></li>
<li><a class="" href="importexport.html"><span class="header-section-number">4</span> Data Structures and Importing Data</a></li>
<li><a class="" href="troubleshooting.html"><span class="header-section-number">5</span> Troubleshooting in R</a></li>
<li><a class="" href="filter-select-mutate.html"><span class="header-section-number">6</span> Data Manipulation with R, Part 1</a></li>
<li><a class="" href="nums-chrs.html"><span class="header-section-number">7</span> Numbers, Characters, and Factors in R</a></li>
<li><a class="" href="lubridate.html"><span class="header-section-number">8</span> Dates and Times in R</a></li>
<li><a class="" href="manipulation.html"><span class="header-section-number">9</span> Data Manipulation with R, Part 2</a></li>
<li><a class="" href="style.html"><span class="header-section-number">10</span> Coding Best Practices</a></li>
<li><a class="" href="ggplot.html"><span class="header-section-number">11</span> Data Visualization with ggplot2</a></li>
<li><a class="" href="data-presentation.html"><span class="header-section-number">12</span> Customizing Graphics with ggplot2</a></li>
<li><a class="" href="tables.html"><span class="header-section-number">13</span> Creating and Designing Data Tables</a></li>
<li><a class="" href="git.html"><span class="header-section-number">14</span> Version Control with Git and GitHub</a></li>
<li><a class="" href="github.html"><span class="header-section-number">15</span> Collaboration with GitHub (or friends)</a></li>
<li><a class="" href="markdown.html"><span class="header-section-number">16</span> Reproducible Reports with R Markdown and Quarto</a></li>
<li><a class="" href="qaqc.html"><span class="header-section-number">17</span> Data Cleaning in R</a></li>
<li><a class="active" href="for-if.html"><span class="header-section-number">18</span> Iterating and Conditioning: for Loops and if Statements</a></li>
<li><a class="" href="functions.html"><span class="header-section-number">19</span> Writing Your Own Functions</a></li>
<li><a class="" href="lists.html"><span class="header-section-number">20</span> Complex Data Structures in R</a></li>
<li><a class="" href="spatial.html"><span class="header-section-number">21</span> An Introduction to Spatial Data in R</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="for-if" class="section level1" number="18">
<h1>
<span class="header-section-number">18</span> Iterating and Conditioning: <code>for</code> Loops and <code>if</code> Statements<a class="anchor" aria-label="anchor" href="#for-if"><i class="fas fa-link"></i></a>
</h1>
<div id="objectives-15" class="section level2" number="18.1">
<h2>
<span class="header-section-number">18.1</span> Objectives<a class="anchor" aria-label="anchor" href="#objectives-15"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Apply loops to automate repeating tasks</li>
<li>Use conditional statements within loops</li>
<li>Understand when to use <code>for</code>, <code>while</code>, and <code>if</code> statements</li>
</ul>
</div>
<div id="additional-reading-12" class="section level2" number="18.2">
<h2>
<span class="header-section-number">18.2</span> Additional reading<a class="anchor" aria-label="anchor" href="#additional-reading-12"><i class="fas fa-link"></i></a>
</h2>
<p>Hadley Wickham, Mine Çetinkaya-Rundel, and Garrett Grolemund. R for Data Science (2e). Chapter 27: A field guide to base R; Section 27.5: <code>for</code> loops. Available: <a href="https://r4ds.hadley.nz/base-R.html#for-loops" class="uri">https://r4ds.hadley.nz/base-R.html#for-loops</a></p>
</div>
<div id="motivation" class="section level2" number="18.3">
<h2>
<span class="header-section-number">18.3</span> Motivation<a class="anchor" aria-label="anchor" href="#motivation"><i class="fas fa-link"></i></a>
</h2>
<p>We are now in the “Advanced R” section of the course. Although the concepts we’re learning here might require a little more practice to get right, they are also the main <em>power</em> of programming. For the most part, the operations we have learned so far might not have been as easily <em>reproducible</em> if done in Excel, but they would have been possible. For example, pivot tables can group and summarize data. In this lesson, we will use R to automate repeating a task using what is called a <code>for</code> loop, as well as working with some other programming tools that work well with a <code>for</code> loop.</p>
</div>
<div id="what-is-a-loop" class="section level2" number="18.4">
<h2>
<span class="header-section-number">18.4</span> What is a loop?<a class="anchor" aria-label="anchor" href="#what-is-a-loop"><i class="fas fa-link"></i></a>
</h2>
<p>A loop allows you to iterate a task, telling R to do the same thing over and over again. For-loops keep code clean and avoid unnecessary repetition of a code block. Loops are especially useful when you want to edit that task later, since you only need to edit the operation once instead of each time it was applied.</p>
</div>
<div id="using-loops" class="section level2" number="18.5">
<h2>
<span class="header-section-number">18.5</span> Using loops<a class="anchor" aria-label="anchor" href="#using-loops"><i class="fas fa-link"></i></a>
</h2>
<p>Loops are easiest to understand with an example. The basic syntax for a <code>for</code> loop is:</p>
<pre><code>for(variable in sequence){
  do something
}</code></pre>
<p>For example:</p>
<div class="sourceCode" id="cb625"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">100</span>, <span class="fl">1000</span>, <span class="fl">10000</span>, <span class="fl">100000</span><span class="op">)</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">x</span> <span class="kw">in</span> <span class="va">vals</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log10</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code>## [1] 0
## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p>Here, I have <em>looped over</em> the values in the object called <code>vals</code>. Each time R goes through the loop, it assigns the next value in <code>vals</code> to <code>x</code>. I have then asked it to take the logarithm of <code>x</code> and print that to the screen.</p>
<p>This is not a good application of a loop because the function <code><a href="https://rdrr.io/r/base/Log.html">log10()</a></code> can take a vector as its argument, so we would get the same result with <code>print(log10(vals))</code>.</p>
<p>Loops become useful when (a) a function can’t operate on a vector, and (b) when we want to include conditional statements (more on that below).</p>
<p>For example, to sample 100 values from from a normal distribution with a mean of 0 and a standard deviation of 2, we use <code>rnorm(n = 100, mean = 0, sd = 2)</code>. But what if we wanted to look at these distributions with standard deviations ranging from 1 to 10? <code><a href="https://rdrr.io/r/stats/Normal.html">rnorm()</a></code> can only take a single number for <code>sd</code>, so we would want to use a loop.</p>
<div class="sourceCode" id="cb627"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the vector of standard deviations</span></span>
<span><span class="va">sd_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co"># Loop over SDs</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">x</span> <span class="kw">in</span> <span class="va">sd_vals</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="co"># For each SD (x), get 100 values from a normal distribution with mean=0 and sd=x</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">100</span>, mean <span class="op">=</span> <span class="fl">0</span>, sd <span class="op">=</span> <span class="va">x</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>Wait, did that work? There’s no output!</strong> This is one finicky aspect of loops that takes some getting used to. Because the operation is happening inside the loop, it doesn’t print to the screen by default. We can fix that by explicitly including <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> (but I won’t show the output here because it would be 10 sets of 100 values):</p>
<div class="sourceCode" id="cb628"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Loop over SDs</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">x</span> <span class="kw">in</span> <span class="va">sd_vals</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="co"># For each SD (x), get 100 values from a normal distribution with mean=0 and sd=x</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">100</span>, mean <span class="op">=</span> <span class="fl">0</span>, sd <span class="op">=</span> <span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>It also takes some practice to assign new objects in loops, because if we did this:</p>
<div class="sourceCode" id="cb629"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the vector of standard deviations</span></span>
<span><span class="va">sd_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> </span>
<span><span class="co"># Loop over SDs</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">x</span> <span class="kw">in</span> <span class="va">sd_vals</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="co"># For each SD (x), get 100 values from a normal distribution with mean=0 and sd=x</span></span>
<span>  <span class="va">norm_dist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">100</span>, mean <span class="op">=</span> <span class="fl">0</span>, sd <span class="op">=</span> <span class="va">x</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>We would end up with only the last iteration saved in <code>norm_dist</code>. To solve this problem, think about the type of object you would like to get out of the loop. Here’s let’s say we want a long-form data frame with two columns: one stating the standard deviation and one with the 100 values for each distribution. We can initiate this data frame before the loop starts, then add to it as it goes:</p>
<div class="sourceCode" id="cb630"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the vector of standard deviations</span></span>
<span><span class="va">sd_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co"># Create an empty data frame in which to save data</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># Loop over SDs</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">x</span> <span class="kw">in</span> <span class="va">sd_vals</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="co"># For each SD (x), get 100 values from a normal distribution with mean=0 and sd=x</span></span>
<span>  <span class="va">norm_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">100</span>, mean <span class="op">=</span> <span class="fl">0</span>, sd <span class="op">=</span> <span class="va">x</span><span class="op">)</span></span>
<span>  <span class="co"># Create a two-column data frame with a column saving the SD (x) and a column with all simulated values</span></span>
<span>  <span class="va">norm_vals_tib</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_cols.html">bind_cols</a></span><span class="op">(</span>sd <span class="op">=</span> <span class="va">x</span>, val <span class="op">=</span> <span class="va">norm_vals</span><span class="op">)</span></span>
<span>  <span class="co"># Add these to the results data frame</span></span>
<span>  <span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="va">results</span>, <span class="va">norm_vals_tib</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Now, we have all our results saved:</p>
<div class="sourceCode" id="cb631"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 1000    2</code></pre>
<div class="sourceCode" id="cb633"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "sd"  "val"</code></pre>
<div class="sourceCode" id="cb635"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">results</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">val</span>, color <span class="op">=</span> <span class="va">sd</span>, group <span class="op">=</span> <span class="va">sd</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span><span class="op">)</span> </span></code></pre></div>
<div class="inline-figure"><img src="for-if_files/figure-html/unnamed-chunk-7-1.png" width="672"></div>
<p><code>for</code> loops are more aligned with a “base R” way of programming than with <code>tidyverse</code>, but you will encounter them often if using other code. They also form the conceptual base of some <code>tidyverse</code> functions, so understanding them can help you later. Because <code>for</code> loops are associated with base R, it is often necessary - or at least helpful - to remember to use square brackets for indexing, because you will often be dealing with <em>vectors</em> rather than <em>data frames</em> or <em>tibbles</em>. For example, a common way to write a loop is:</p>
<div class="sourceCode" id="cb636"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">100</span>, <span class="fl">1000</span>, <span class="fl">10000</span>, <span class="fl">100000</span><span class="op">)</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_along</a></span><span class="op">(</span><span class="va">vals</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log10</a></span><span class="op">(</span><span class="va">vals</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code>## [1] 0
## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p>Here, instead of assigning <code>i</code> to the values in <code>vals</code>, we assign it to an <em>index</em>, which tells us here in the <code>vals</code> vector we are (here, <code>i</code> counts up from 1 to 6 as we go through the loop). <code>seq_along(vals)</code> is the equivalent of <code>1:length(vals)</code>, but is safer because if a vector is of length 0, <code><a href="https://rdrr.io/r/base/seq.html">seq_along()</a></code> returns a zero-length vector, whereas <code>1:length()</code> counts backwards (i.e, it returns 1, 0).</p>
<p>This practice is useful when we are looping through multiple vectors together. For example, if we have a vector of standard deviations and a vector of corresponding means, we might do something like:</p>
<div class="sourceCode" id="cb638"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">2025</span><span class="op">)</span></span>
<span><span class="va">means</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="co">#10 random values for the mean</span></span>
<span><span class="va">sds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="co">#10 random ravlues for the SD</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="co">#Blank data frame for output</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">means</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="co">#Simulate five values with the mean and SD of the current index</span></span>
<span>  <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">5</span>, mean <span class="op">=</span> <span class="va">means</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, sd <span class="op">=</span> <span class="va">sds</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="co">#Combine these values with their corresponding mean and SD</span></span>
<span>  <span class="va">df_temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_cols.html">bind_cols</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="va">means</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, sd <span class="op">=</span> <span class="va">sds</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, val <span class="op">=</span> <span class="va">values</span><span class="op">)</span></span>
<span>  <span class="co">#Combine values from all simulations</span></span>
<span>  <span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="va">results</span>, <span class="va">df_temp</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">results</span>, <span class="fl">8</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 8 × 3
##    mean    sd    val
##   &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
## 1     4     7 -1.91 
## 2     4     7 -0.512
## 3     4     7 -3.45 
## 4     4     7  4.80 
## 5     4     7 -4.44 
## 6     1     5 -3.64 
## 7     1     5  7.56 
## 8     1     5  8.40</code></pre>
<p>Loops do take some practice, but with these basics you should be able to practice and perfect. Remember:</p>
<ol style="list-style-type: decimal">
<li>Create an object <em>outside</em> the loop where you will save your results</li>
<li>Loops don’t print to the screen by default. Add <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> if you want to see what’s happening.</li>
<li>You can loop over vectors, but also over columns or rows in a data frame. We will practice this later.</li>
<li>Troubleshooting loops can be difficult, but you can always take a look at the index where it stopped (<code>x</code> in the examples above) to see if it had a problem with one item in particular, or if there’s something wrong from the get-go.</li>
</ol>
</div>
<div id="if-statements" class="section level2" number="18.6">
<h2>
<span class="header-section-number">18.6</span> <code>if</code> statements<a class="anchor" aria-label="anchor" href="#if-statements"><i class="fas fa-link"></i></a>
</h2>
<p>We used the <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code> function earlier to create new columns that are <em>conditional</em> on other columns. The <code>if</code> statement is the basic form of <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code>. In a similar format as a <code>for</code> loop, we ask R to do something if a condition is met, then potentially give it alternatives if not. The basic syntax of an <code>if</code> statement is:</p>
<pre><code>if(condition){
  do something
}</code></pre>
<p><code>condition</code> should return a single logical value (<code>TRUE</code> or <code>FALSE</code>). This is why <code>if</code> and loops are so closely tied - <code>if</code> statements do not take vector arguments. We can also add <code>else</code> to keep going:</p>
<pre><code>if(condition1) {
  do something
} else if(condition2) {
  do something else
} else {
  do yet another thing
}</code></pre>
<p>Here, we ask R to evaluate <code>condition1</code>. If that returns <code>FALSE</code>, it will move on to <code>condition2</code>. If <code>condition2</code> is <code>FALSE</code> it will do “yet another thing”. This differs from the first example, where if <code>condition</code> was <code>FALSE</code>, R would do <em>nothing</em>.</p>
<p>Let’s try an example:</p>
<div class="sourceCode" id="cb642"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">animal</span> <span class="op">&lt;-</span> <span class="st">"squirrel"</span></span>
<span><span class="co"># Evaluate the first condition</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="va">animal</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"mallard"</span>, <span class="st">"whimbrel"</span>, <span class="st">"trumpeter swan"</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"This is a bird."</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span><span class="op">{</span> <span class="co">#If not met, do this other thing</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"This is not a bird."</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code>## [1] "This is not a bird."</code></pre>
<p>This is not a great use for an <code>if</code> statement because it is the same as:</p>
<div class="sourceCode" id="cb644"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">animal</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"mallard"</span>, <span class="st">"whimbrel"</span>, <span class="st">"trumpeter swan"</span><span class="op">)</span>,</span>
<span>        <span class="st">"This is a bird."</span>,</span>
<span>        <span class="st">"This is not a bird."</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "This is not a bird."</code></pre>
<p><code>if</code> statements and <code>for</code> loops are especially useful with lists, which we will cover soon.</p>
</div>
<div id="while-loops" class="section level2" number="18.7">
<h2>
<span class="header-section-number">18.7</span> <code>while</code> loops<a class="anchor" aria-label="anchor" href="#while-loops"><i class="fas fa-link"></i></a>
</h2>
<p>Writing a <code>for</code> loop requires that we know what sequence to loop over. However, sometimes, we want to perform a calculation until a condition is met. Here, we can use a <code>while</code> loop. A <code>while</code> loop combines the syntax of a <code>for</code> loop with the condition of an <code>if</code> statement. For example, let’s say we wanted to draw numbers from a vector until the sum was greater than 10. We would do this:</p>
<div class="sourceCode" id="cb646"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define a vector of values to sample from</span></span>
<span><span class="va">all_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co"># Define empty objects to use within the loop</span></span>
<span><span class="va">vect</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html">vector</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">sum_vect</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="co"># Run the loop as long as the sum_vect obejct is less than 10</span></span>
<span><span class="kw">while</span><span class="op">(</span><span class="va">sum_vect</span> <span class="op">&lt;=</span> <span class="fl">10</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="co"># Randomly sample a value from the all_vals vector</span></span>
<span>  <span class="va">new_val</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">all_vals</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="co"># Add this to our vector of values</span></span>
<span>  <span class="va">vect</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">vect</span>, <span class="va">new_val</span><span class="op">)</span></span>
<span>  <span class="co"># Take the sum and assign it to summ_vect, which goes back to "while"</span></span>
<span>  <span class="va">sum_vect</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">vect</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">vect</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 8.666539 5.743882</code></pre>
<div class="sourceCode" id="cb648"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">sum_vect</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 14.41042</code></pre>
<p><code>while</code> loops can be dangerous - there is always a chance that your condition will never be met and the loop will run forever! If you encounter this, the stop sign icon (top-right of your console) or the Session–&gt;“Interrupt R” menu are useful.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="qaqc.html"><span class="header-section-number">17</span> Data Cleaning in R</a></div>
<div class="next"><a href="functions.html"><span class="header-section-number">19</span> Writing Your Own Functions</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#for-if"><span class="header-section-number">18</span> Iterating and Conditioning: for Loops and if Statements</a></li>
<li><a class="nav-link" href="#objectives-15"><span class="header-section-number">18.1</span> Objectives</a></li>
<li><a class="nav-link" href="#additional-reading-12"><span class="header-section-number">18.2</span> Additional reading</a></li>
<li><a class="nav-link" href="#motivation"><span class="header-section-number">18.3</span> Motivation</a></li>
<li><a class="nav-link" href="#what-is-a-loop"><span class="header-section-number">18.4</span> What is a loop?</a></li>
<li><a class="nav-link" href="#using-loops"><span class="header-section-number">18.5</span> Using loops</a></li>
<li><a class="nav-link" href="#if-statements"><span class="header-section-number">18.6</span> if statements</a></li>
<li><a class="nav-link" href="#while-loops"><span class="header-section-number">18.7</span> while loops</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Management and Reproducible Science</strong>" was written by Claire S Teitelbaum. It was last built on 2025-11-08.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
